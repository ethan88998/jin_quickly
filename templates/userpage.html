<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>用户管理</title>
    <style>
        body { font-family: Arial; background:#f0f2f5; }
        .container {
            width: 80%;
            margin: 50px auto;
            background:#fff;
            padding:20px;
            border-radius:6px;
        }
        table {
            width:100%;
            border-collapse:collapse;
        }
        th, td {
            border:1px solid #ddd;
            padding:10px;
            text-align:center;
        }
        th { background:#fafafa; }
        button {
            padding:5px 10px;
            margin:0 3px;
            border:none;
            border-radius:4px;
            cursor:pointer;
        }
        .look {background: cornflowerblue;color: #fff;}
        .edit { background:#52c41a; color:#fff; }
        .delete { background:#ff4d4f; color:#fff; }
    </style>
</head>
<body>
<div class="container">
    <h2>用户管理后台</h2>
    <p>欢迎用户～{{ .username }}～登录</p>
    <table>
        <tr>
            <th>ID</th>
            <th>用户名</th>
            <th>年龄</th>
            <th>邮箱</th>
            <th>操作</th>
        </tr>

        {{ range .users }}
        <tr>
            <td>{{ .ID }}</td>
            <td>{{ .Username }}</td>
            <td>{{ .Age }}</td>
            <td>{{ .Email }}</td>
            <td>
                <button class="view" onclick="viewUser({{ .ID }} )">查看</button>
                <button class="edit" onclick="editUser({{ .ID }})">编辑</button>
                <button class="delete" onclick="deleteUser({{ .ID }})">删除</button>
            </td>
        </tr>
        {{ end }}
    </table>
</div>

<script>
    function deleteUser(id) {
        if (confirm("确定要删除这个用户吗？")) {
            fetch("/admin/user/" + id, {
                method: "DELETE",
            })
                .then(() => {
                    alert("用户已删除");
                    location.reload();  // 刷新页面以显示最新数据
                })
                .catch((err) => {
                    console.error("删除失败：", err);
                    alert("删除失败");
                });
        }
    }
    // 查看用户（这里是个占位函数，假设你有查看用户的页面）
    // function viewUser(id) {
    //     alert("查看用户的 ID：" + id);
    // }
    // 编辑用户
    function editUser(id) {
        window.location.href = "/admin/user/edit?id=" + id;
    }
    // 查看用户信息
    function viewUser(id) {
        window.location.href = "/admin/user/look?id=" + id;
    }
</script>


</body>
</html>
